---
import BaseHead from '../components/BaseHead.astro';
import Footer from '../components/Footer.astro';
import Header from '../components/Header.astro';

interface Props {
	frontmatter: any;
}

const { frontmatter } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={`CV | ${frontmatter.name}`} description={`Resume of ${frontmatter.name}`} />
		<style>
			:root {
				--bg-white: #ffffff;
				--sidebar-bg: #f8fafc;
				--text-main: #1e293b;
				--text-muted: #475569;
				--accent: #2337ff;
			}

			body {
				background: #cbd5e1;
				margin: 0;
				padding: 0;
				font-family: 'Inter', system-ui, sans-serif;
			}

			.page {
				width: 210mm;
				min-height: 297mm;
				padding: 0;
				margin: 20px auto;
				background: var(--bg-white);
				box-shadow: 0 0 10px rgba(0,0,0,0.1);
				display: flex;
				overflow: hidden;
			}

			@media print {
				body { background: none; }
				header:not(.resume-header), footer, .print-btn { display: none !important; }
				.page { margin: 0; box-shadow: none; width: 100%; height: 100%; }
			}

			.sidebar {
				width: 32%;
				background-color: var(--sidebar-bg);
				padding: 40px 25px;
				border-right: 1px solid #e2e8f0;
			}

			.main-content {
				width: 68%;
				padding: 40px 35px;
			}

			h2 {
				font-size: 11pt;
				font-weight: 800;
				text-transform: uppercase;
				letter-spacing: 0.05em;
				color: var(--text-main);
				border-bottom: 2px solid var(--accent);
				padding-bottom: 4px;
				margin-bottom: 15px;
				margin-top: 25px;
			}

			.sidebar h2 { margin-top: 0; }

			h1 {
				font-size: 28pt;
				font-weight: 900;
				color: var(--text-main);
				margin: 0;
				line-height: 1;
			}

			.role-title {
				font-size: 14pt;
				color: var(--accent);
				font-weight: 600;
				margin-top: 5px;
				margin-bottom: 25px;
			}

			.contact-item {
				font-size: 9pt;
				margin-bottom: 12px;
				color: var(--text-muted);
			}

			.contact-item strong {
				color: var(--text-main);
				display: block;
				text-transform: uppercase;
				font-size: 7pt;
				letter-spacing: 0.05em;
			}

			/* Skills */
			.skill-group { margin-bottom: 15px; }
			.skill-group-title { font-weight: 700; font-size: 8pt; text-transform: uppercase; color: var(--text-main); margin-bottom: 5px; }
			.skill-tags { display: flex; flex-wrap: wrap; gap: 5px; }
			.skill-tag { font-size: 8pt; background: #fff; border: 1px solid #e2e8f0; padding: 2px 6px; border-radius: 4px; }

			/* Content Styling */
			.prose-cv :global(h3) { font-weight: 800; font-size: 11pt; color: var(--text-main); margin-top: 20px; margin-bottom: 2px; }
			.prose-cv :global(p) { font-size: 9.5pt; color: var(--text-muted); line-height: 1.5; margin-top: 2px; }
			.prose-cv :global(ul) { margin-top: 8px; padding-left: 15px; font-size: 9pt; color: var(--text-muted); list-style-type: disc; }
			.prose-cv :global(li) { margin-bottom: 4px; }
			.prose-cv :global(strong) { color: var(--text-main); }

			.print-btn {
				position: fixed; bottom: 30px; right: 30px; background: var(--accent); color: white;
				padding: 12px 24px; border-radius: 99px; font-weight: bold; cursor: pointer;
				box-shadow: 0 4px 12px rgba(35, 55, 255, 0.3); border: none; z-index: 100;
			}
		</style>
	</head>
	<body class="bg-slate-50 print:bg-white">
		<Header class="print:hidden" />
		<button class="print-btn" onclick="window.print()">Download / Print CV</button>

		<div class="page">
			<!-- Sidebar -->
			<aside class="sidebar">
				<section>
					<h2>Contact</h2>
					<div class="contact-item"><strong>Email</strong>{frontmatter.email}</div>
					<div class="contact-item"><strong>Phone</strong>{frontmatter.phone}</div>
					<div class="contact-item"><strong>Location</strong>{frontmatter.location}</div>
					<div class="contact-item"><strong>Links</strong>
						{frontmatter.profiles.map(p => (
							<a href={p.url} style="display:block; color:inherit; text-decoration:none;">{p.network}: {p.url.replace('https://', '')}</a>
						))}
					</div>
				</section>

				<section style="margin-top: 30px;">
					<h2>Skills</h2>
					{frontmatter.skills.map(group => (
						<div class="skill-group">
							<div class="skill-group-title">{group.name}</div>
							<div class="skill-tags">
								{group.keywords.map(k => <span class="skill-tag">{k}</span>)}
							</div>
						</div>
					))}
				</section>

				<section style="margin-top: 30px;">
					<h2>Education</h2>
					{frontmatter.education.map(edu => (
						<div class="edu-item" style="margin-bottom: 12px;">
							<div style="font-weight: 700; font-size: 9pt; color: var(--text-main);">{edu.institution}</div>
							<div style="font-size: 8pt; color: var(--text-muted);">{edu.studyType} in {edu.area}</div>
							<div style="font-size: 8pt; color: var(--text-muted);">{edu.startDate} â€” {edu.endDate}</div>
						</div>
					))}
				</section>
			</aside>

			<!-- Main -->
			<div class="main-content">
				<header class="resume-header">
					<h1>{frontmatter.name.toUpperCase()}</h1>
					<div class="role-title">{frontmatter.label}</div>
				</header>

				<section>
					<h2>Professional Summary</h2>
					<p style="font-size: 9.5pt; color: var(--text-muted); line-height: 1.6; margin-top: 0;">
						{frontmatter.summary}
					</p>
				</section>

				<section class="prose-cv">
					<slot />
				</section>
			</div>
		</div>
		<Footer class="print:hidden" />
	</body>
</html>
