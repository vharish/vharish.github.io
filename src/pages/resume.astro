---
import BaseHead from '../components/BaseHead.astro';
import Header from '../components/Header.astro';
import Footer from '../components/Footer.astro';
import ExperienceItem from '../components/resume/ExperienceItem.astro';
import SkillGroup from '../components/resume/SkillGroup.astro';
import { SITE_TITLE } from '../consts';
import resumeData from '../data/resume.json';

const { basics, work, education, skills } = resumeData;
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={`Resume | ${basics.name}`} description={`${basics.name} - ${basics.label} Resume`} />
		<style>
			@media print {
				header:not(.resume-header), footer, .print-hidden { display: none !important; }
				@page { margin: 1.5cm; }
				body { background-color: white !important; color: black !important; font-size: 10pt; }
				main { padding: 0 !important; margin: 0 !important; max-width: none !important; width: 100% !important; }
				.resume-container { box-shadow: none !important; border: none !important; padding: 0 !important; }
				.resume-header { border-bottom-width: 2px !important; margin-bottom: 1.5rem !important; padding-bottom: 1rem !important; }
				section { page-break-inside: auto !important; margin-bottom: 1.5rem !important; }
				.skills-edu-grid { display: grid !important; grid-template-columns: 1fr 1fr !important; gap: 2rem !important; }
			}
		</style>
	</head>
	<body class="bg-slate-50 print:bg-white">
		<Header class="print:hidden" />
		<main class="max-w-4xl mx-auto px-4 py-16 print:py-0 print:px-0">
			<div class="resume-container bg-white p-8 sm:p-12 shadow-sm border border-slate-200 rounded-2xl print:shadow-none print:border-none print:p-0">
				<!-- Header -->
				<header class="resume-header border-b border-slate-200 pb-8 mb-8 flex flex-col md:flex-row justify-between items-start md:items-center gap-4">
					<div>
						<h1 class="text-4xl font-extrabold text-slate-900 tracking-tight">{basics.name}</h1>
						<p class="text-xl text-accent font-medium mt-1">{basics.label}</p>
					</div>
					<div class="text-sm text-slate-600 space-y-1 md:text-right">
						<p>üìç {basics.location}</p>
						<p>üìû {basics.phone}</p>
						<p>‚úâÔ∏è <a href={`mailto:${basics.email}`} class="hover:text-accent">{basics.email}</a></p>
					</div>
				</header>

				<!-- Summary -->
				<section class="mb-10">
					<h2 class="text-sm font-bold uppercase tracking-widest text-slate-400 mb-4">Summary</h2>
					<p class="text-slate-700 leading-relaxed">{basics.summary}</p>
				</section>

				<!-- Experience -->
				<section class="mb-10">
					<h2 class="text-sm font-bold uppercase tracking-widest text-slate-400 mb-6">Experience</h2>
					<div class="space-y-10">
						{work.map((job, index) => (
							<ExperienceItem 
								{...job} 
								isLast={index === work.length - 1}
							/>
						))}
					</div>
				</section>

				<div class="skills-edu-grid grid grid-cols-1 md:grid-cols-2 gap-10">
					<!-- Skills -->
					<section>
						<h2 class="text-sm font-bold uppercase tracking-widest text-slate-400 mb-6">Skills</h2>
						<div class="space-y-2">
							{skills.map(group => <SkillGroup {...group} />)}
						</div>
					</section>

					<!-- Education -->
					<section>
						<h2 class="text-sm font-bold uppercase tracking-widest text-slate-400 mb-6">Education</h2>
						<div class="space-y-6">
							{education.map(edu => (
								<div>
									<h3 class="text-sm font-bold text-slate-900">{edu.institution}</h3>
									<p class="text-xs text-accent font-medium">{edu.studyType}, {edu.area}</p>
									<p class="text-xs text-slate-500">{edu.startDate} ‚Äî {edu.endDate} | {edu.score}</p>
								</div>
							))}
						</div>
					</section>
				</div>
				
				<!-- Print Action -->
				<div class="mt-12 pt-8 border-t border-slate-100 text-center print:hidden">
					<button onclick="window.print()" class="text-sm font-bold text-accent hover:text-accent-dark transition-colors inline-flex items-center gap-2">
						<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z" />
						</svg>
						Print Resume
					</button>
				</div>
			</div>
		</main>
		<Footer />
	</body>
</html>
