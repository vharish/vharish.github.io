---
import BaseHead from '../components/BaseHead.astro';
import resumeData from '../data/resume.json';
const { basics, work, education, skills } = resumeData;
---

<!doctype html>
<html lang="en">
	<head>
		<BaseHead title={`CV | ${basics.name}`} description={`Professional CV of ${basics.name}`} />
		<style>
			/* A4 Paper Styling */
			:root {
				--bg-white: #ffffff;
				--sidebar-bg: #f8fafc;
				--text-main: #1e293b;
				--text-muted: #475569;
				--accent: #2337ff;
			}

			body {
				background: #cbd5e1;
				margin: 0;
				padding: 0;
				font-family: 'Inter', system-ui, sans-serif;
			}

			.page {
				width: 210mm;
				min-height: 297mm;
				padding: 0;
				margin: 20px auto;
				background: var(--bg-white);
				box-shadow: 0 0 10px rgba(0,0,0,0.1);
				display: flex;
				overflow: hidden;
			}

			@media print {
				body { background: none; }
				.page { 
					margin: 0; 
					box-shadow: none;
					width: 100%;
					height: 100%;
				}
				.print-btn { display: none; }
			}

			/* Sidebar (Left) */
			.sidebar {
				width: 32%;
				background-color: var(--sidebar-bg);
				padding: 40px 25px;
				display: flex;
				flex-direction: column;
				gap: 30px;
				border-right: 1px solid #e2e8f0;
			}

			/* Main Content (Right) */
			.main-content {
				width: 68%;
				padding: 40px 35px;
			}

			h2 {
				font-size: 11pt;
				font-weight: 800;
				text-transform: uppercase;
				letter-spacing: 0.05em;
				color: var(--text-main);
				border-bottom: 2px solid var(--accent);
				padding-bottom: 4px;
				margin-bottom: 15px;
			}

			h1 {
				font-size: 28pt;
				font-weight: 900;
				color: var(--text-main);
				margin: 0;
				line-height: 1;
			}

			.role-title {
				font-size: 14pt;
				color: var(--accent);
				font-weight: 600;
				margin-top: 5px;
				margin-bottom: 25px;
			}

			.contact-item {
				font-size: 9pt;
				margin-bottom: 10px;
				color: var(--text-muted);
			}

			.contact-item strong {
				color: var(--text-main);
				display: block;
				text-transform: uppercase;
				font-size: 7pt;
				letter-spacing: 0.05em;
			}

			/* Work Experience */
			.job {
				margin-bottom: 20px;
			}

			.job-header {
				display: flex;
				justify-content: space-between;
				align-items: baseline;
				margin-bottom: 4px;
			}

			.job-company {
				font-weight: 800;
				font-size: 11pt;
				color: var(--text-main);
			}

			.job-date {
				font-size: 8.5pt;
				color: var(--text-muted);
				font-weight: 500;
			}

			.job-title {
				font-weight: 600;
				font-size: 9.5pt;
				color: var(--accent);
				margin-bottom: 6px;
			}

			.job-list {
				margin: 0;
				padding-left: 15px;
				font-size: 9pt;
				color: var(--text-muted);
				line-height: 1.5;
			}

			.job-list li {
				margin-bottom: 4px;
			}

			/* Skills */
			.skill-group {
				margin-bottom: 15px;
			}

			.skill-group-title {
				font-weight: 700;
				font-size: 8pt;
				text-transform: uppercase;
				color: var(--text-main);
				margin-bottom: 5px;
			}

			.skill-tags {
				display: flex;
				flex-wrap: wrap;
				gap: 5px;
			}

			.skill-tag {
				font-size: 8pt;
				background: #fff;
				border: 1px solid #e2e8f0;
				padding: 2px 6px;
				border-radius: 4px;
			}

			/* Education */
			.edu-item {
				margin-bottom: 15px;
			}

			.edu-name {
				font-weight: 700;
				font-size: 9pt;
				color: var(--text-main);
			}

			.edu-meta {
				font-size: 8pt;
				color: var(--text-muted);
			}

			.print-btn {
				position: fixed;
				bottom: 30px;
				right: 30px;
				background: var(--accent);
				color: white;
				padding: 12px 24px;
				border-radius: 99px;
				font-weight: bold;
				cursor: pointer;
				box-shadow: 0 4px 12px rgba(35, 55, 255, 0.3);
				border: none;
				z-index: 100;
			}
		</style>
	</head>
	<body>
		<button class="print-btn" onclick="window.print()">Download / Print CV</button>

		<div class="page">
			<!-- Left Sidebar -->
			<div class="sidebar">
				<section>
					<h2>Contact</h2>
					<div class="contact-item">
						<strong>Email</strong>
						{basics.email}
					</div>
					<div class="contact-item">
						<strong>Phone</strong>
						{basics.phone}
					</div>
					<div class="contact-item">
						<strong>Location</strong>
						{basics.location}
					</div>
					<div class="contact-item">
						<strong>Links</strong>
						{basics.profiles.map(p => (
							<a href={p.url} style="display:block; color:inherit; text-decoration:none;">{p.network}: {p.url.replace('https://', '')}</a>
						))}
					</div>
				</section>

				<section>
					<h2>Skills</h2>
					{skills.map(group => (
						<div class="skill-group">
							<div class="skill-group-title">{group.name}</div>
							<div class="skill-tags">
								{group.keywords.map(k => <span class="skill-tag">{k}</span>)}
							</div>
						</div>
					))}
				</section>

				<section>
					<h2>Education</h2>
					{education.map(edu => (
						<div class="edu-item">
							<div class="edu-name">{edu.institution}</div>
							<div class="edu-meta">{edu.studyType} in {edu.area}</div>
							<div class="edu-meta">{edu.startDate} — {edu.endDate}</div>
							<div class="edu-meta">Result: {edu.score}</div>
						</div>
					))}
				</section>
			</div>

			<!-- Main Content -->
			<div class="main-content">
				<header>
					<h1>{basics.name.toUpperCase()}</h1>
					<div class="role-title">{basics.label}</div>
				</header>

				<section>
					<h2>Professional Summary</h2>
					<p style="font-size: 9.5pt; color: var(--text-muted); line-height: 1.6; margin-top: 0;">
						{basics.summary}
					</p>
				</section>

				<section style="margin-top: 25px;">
					<h2>Experience</h2>
					{work.map(job => (
						<div class="job">
							<div class="job-header">
								<span class="job-company">{job.company}</span>
								<span class="job-date">{job.startDate} — {job.endDate}</span>
							</div>
							<div class="job-title">{job.position}</div>
							<ul class="job-list">
								{job.highlights.map(h => <li set:html={h}></li>)}
							</ul>
						</div>
					))}
				</section>
			</div>
		</div>
	</body>
</html>
